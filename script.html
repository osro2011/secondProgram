<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <script src="http://koda.nu/simple.js">
        class Point {
            constructor(X, Y) {
                this.x = X;
                this.y = Y;
            }
        }
        
        class Vector {
            constructor(Velocity, Angle) {
                this.velocity = Velocity;
                this.angle = Angle * (Math.PI/180);
            };

            toXY() {
                this.x = this.velocity * Math.cos(this.angle);
                this.y = this.velocity * Math.sin(this.angle); 
                return [this.x, this.y]
            };

            bounce(bounceAngle) {
                var angleDeg = this.angle/(Math.PI/180);
                var answerDeg = (180 - (angleDeg + (2 * bounceAngle)))%360;
                this.angle = answerDeg * (Math.PI/180);
            };
        };

        class Cube {
            constructor(Point, Vector, Bounds, Size){
                this.coordinates = Point;
                this.velocity = Vector;
                this.bounds = Bounds;
                this.size = Size;
            };

            drawCube() {
                rectangle(this.coordinates.x, this.coordinates.y, this.size, this.size, "red");
                var components = this.velocity.toXY();
                this.coordinates.x += components[0];
                this.coordinates.y += components[1];

                if (this.coordinates.y > this.bounds.height - this.size || this.coordinates.y < 0) {
                    this.velocity.bounce(90);
                };

                if (this.coordinates.x > this.bounds.width - this.size || this.coordinates.x < 0) {
                    this.velocity.bounce(0);
                };
            };

            drawVector() {
                var components = this.velocity.toXY();
                line(this.coordinates.x + this.size/2, this.coordinates.y + this.size/2, this.coordinates.x + this.size/2 + components[0]*this.size/5, this.coordinates.y + this.size/2 + components[1]*this.size/5, 3, "black");
            };

            checkCollision(cubeList) {

            };
        };

        canvas = document.getElementById("canvas")
		bounds = {
			height: canvas.height,
			width: canvas.width
        };

        var cubes = [];
        
        for (cube = 0; cube < 3; cube++) {
            cubes[cube] = new Cube(new Point(500, 500), new Vector(random(1, 15), random(0, 360)), bounds, 30);
        };

        function update() {
            clearScreen();
            for (cube = 0; cube < cubes.length; cube++) {
                console.log(cube);
                cubes[cube].drawCube();
                cubes[cube].drawVector();
            };
        };
        </script>
    </body>
</html>
